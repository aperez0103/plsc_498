\documentclass[11pt]{article}
\usepackage{amsmath, amssymb, graphicx, hyperref}
\usepackage{enumitem}
\setlist{nosep}
\usepackage[margin=1in]{geometry}

\title{In-Class Problem Set: Distributions and Overplotting with Flight Data (R + GitHub \emph{or} Canvas)}
\author{}
\date{}

\begin{document}
\maketitle

\noindent \textbf{Goal.} Practice visualizing and interpreting distributions using real transportation data. You will use histograms and density plots to explore skewed variables, compare groups, diagnose overplotting, and assess how bin width and smoothing adjustments change interpretation. You may submit via \textbf{GitHub or Canvas}.

\medskip
\noindent \textbf{Dataset.} This problem set uses the \texttt{nycflights13} dataset.

\medskip
\noindent \textbf{Key variables.}
\begin{itemize}
  \item \texttt{dep\_delay}: Departure delay (minutes)
  \item \texttt{arr\_delay}: Arrival delay (minutes)
  \item \texttt{air\_time}: Time in the air (minutes)
  \item \texttt{distance}: Flight distance (miles)
  \item \texttt{carrier}: Airline carrier code
  \item \texttt{origin}: Airport of origin (JFK, LGA, EWR)
\end{itemize}

\medskip
\noindent \textbf{What to submit (GitHub or Canvas).}
\begin{itemize}
  \item \texttt{scripts/lab.R}
  \item \texttt{outputs/writeup.md}
  \item Required figures in \texttt{figures/}
\end{itemize}

\medskip
\noindent \textbf{Rules.}
\begin{itemize}
  \item Work inside an \textbf{R Project}.
  \item Use a \textbf{sequential, hard-coded workflow} (no user-defined functions).
  \item Save all plots using \texttt{ggsave()}.
  \item If submitting via GitHub, Git commands must be run in the \textbf{Terminal tab}.
\end{itemize}

\section*{Questions}

\begin{enumerate}

\item \textbf{Load data and confirm setup (proof required).}

\begin{verbatim}
# load required packages
library(__________)
library(__________)

# access dataset
df <- nycflights13::flights

# quick inspection
dim(df)
names(df)
head(df)
\end{verbatim}

Include in your write-up:
\begin{itemize}
  \item number of rows and columns,
  \item confirmation that \texttt{dep\_delay} and \texttt{arr\_delay} exist.
\end{itemize}

\item \textbf{Histograms and bin width comparison.}

Create histograms for:
\begin{itemize}
  \item \texttt{dep\_delay}
  \item \texttt{arr\_delay}
\end{itemize}

You must:
\begin{itemize}
  \item Use at least \textbf{two different bin widths}.
  \item Compare how bin width changes apparent skew, modality, and tail behavior.
\end{itemize}

\textbf{Pseudo-code structure:}

\begin{verbatim}
# Step 1: choose variable
# Step 2: remove NA values
# Step 3: create histogram with binwidth = ___
# Step 4: create histogram with different binwidth = ___
# Step 5: save figure
\end{verbatim}

\begin{verbatim}
ggplot(df, aes(x = __________)) +
  geom_histogram(binwidth = ________) +
  labs(title = "Histogram with binwidth = ___")

ggplot(df, aes(x = __________)) +
  geom_histogram(binwidth = ________) +
  labs(title = "Histogram with binwidth = ___")
\end{verbatim}

Save as:
\begin{itemize}
  \item \texttt{figures/dep\_delay\_hist.png}
  \item \texttt{figures/arr\_delay\_hist.png}
\end{itemize}

\item \textbf{Histogram vs Density (including smoothing adjustments).}

For \texttt{dep\_delay}, create:
\begin{itemize}
  \item One histogram
  \item One density plot
  \item A second density plot with a different smoothing adjustment (\texttt{adjust})
\end{itemize}

\textbf{Pseudo-code structure:}

\begin{verbatim}
# histogram
ggplot(df, aes(x = ________)) +
  geom_histogram(binwidth = ________)

# density (default smoothing)
ggplot(df, aes(x = ________)) +
  geom_density()

# density with different smoothing
ggplot(df, aes(x = ________)) +
  geom_density(adjust = ________)
\end{verbatim}

Compare:
\begin{itemize}
  \item How smoothing affects perceived multimodality.
  \item Whether density exaggerates or hides tail behavior relative to histogram.
\end{itemize}

Save as:
\texttt{figures/dep\_delay\_hist\_vs\_density.png}

\item \textbf{Grouped distributions (color and faceting).}

Compare \texttt{dep\_delay} across:
\begin{itemize}
  \item \texttt{origin} or
  \item at least three major \texttt{carrier}s.
\end{itemize}

You must:
\begin{itemize}
  \item Create one version using color mapping.
  \item Create one version using \texttt{facet\_wrap()}.
\end{itemize}

\textbf{Pseudo-code structure:}

\begin{verbatim}
# grouped with color
ggplot(df, aes(x = ________, fill = ________)) +
  geom_histogram(position = "identity", alpha = 0.4)

# grouped with faceting
ggplot(df, aes(x = ________)) +
  geom_histogram(binwidth = ________) +
  facet_wrap(~ ________)
\end{verbatim}

Save as:
\texttt{figures/grouped\_dep\_delay.png}

\item \textbf{Overplotting and transparency.}

Create scatter plots:
\begin{itemize}
  \item x-axis: \texttt{distance}
  \item y-axis: \texttt{air\_time}
\end{itemize}

Produce:
\begin{itemize}
  \item One raw version
  \item One version using \texttt{alpha}
\end{itemize}

\begin{verbatim}
# raw scatter
ggplot(df, aes(x = ________, y = ________)) +
  geom_point()

# transparent scatter
ggplot(df, aes(x = ________, y = ________)) +
  geom_point(alpha = ________)
\end{verbatim}

Save as:
\begin{itemize}
  \item \texttt{figures/airtime\_distance\_raw.png}
  \item \texttt{figures/airtime\_distance\_alpha.png}
\end{itemize}

\item \textbf{Interpretation (write-up required).}

Write 12--16 sentences addressing:
\begin{itemize}
  \item How skew appears in delay variables.
  \item How bin width changes visible patterns.
  \item How density smoothing alters interpretation.
  \item When histograms are preferable to density plots.
  \item How faceting changes clarity relative to color overlays.
  \item Why transparency matters in scatter plots.
\end{itemize}

\item \textbf{Submit your work (GitHub or Canvas; proof required).}

\begin{itemize}
  \item \textbf{GitHub option:}
\begin{verbatim}
git status
git add .
git commit -m "Distributions and overplotting lab"
git push
\end{verbatim}

  \item \textbf{Canvas option:}
  Upload required files to Canvas.
\end{itemize}

Include proof in write-up:
\begin{itemize}
  \item GitHub: output of \texttt{git status} and \texttt{git log -1}
  \item Canvas: confirmation note + list of uploaded files
\end{itemize}

\end{enumerate}

\section*{Optional Extension: Faceting and Scaling}

Choose \texttt{dep\_delay} and create:
\begin{itemize}
  \item A faceted histogram by \texttt{origin}
  \item A faceted density plot by \texttt{origin}
\end{itemize}

Then compare:
\begin{itemize}
  \item Whether scale differences distort interpretation.
  \item Whether fixed vs free scales change conclusions.
\end{itemize}

\begin{verbatim}
ggplot(df, aes(x = dep_delay)) +
  geom_histogram(binwidth = ________) +
  facet_wrap(~ origin, scales = "fixed")

ggplot(df, aes(x = dep_delay)) +
  geom_histogram(binwidth = ________) +
  facet_wrap(~ origin, scales = "free")
\end{verbatim}

\section*{Checklist}
\begin{itemize}
  \item Script runs top-to-bottom
  \item Required figures saved
  \item Write-up complete
  \item Submitted via GitHub or Canvas
\end{itemize}

\end{document}
